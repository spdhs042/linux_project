<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>📊 관리자 통계 대시보드</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <h2>📊 슬라이드별 O/X 통계표</h2>

  <table border="1" cellpadding="10" style="width: 50%; border-collapse: collapse;">
    <tr>
      <th>슬라이드 번호</th>
      <th>⭕ O</th>
      <th>❌ X</th>
    </tr>
    {% for slide_idx, count in stats.items() %}
    <tr>
      <td>{{ slide_idx }}</td>
      <td>{{ count.get('O', 0) }}</td>
      <td>{{ count.get('X', 0) }}</td>
    </tr>
    {% endfor %}
  </table>

  <hr>

  <h3>📈 슬라이드별 O/X 응답 그래프</h3>
  <canvas id="oxChart" width="600" height="300"></canvas>

  <script>
    const ctx = document.getElementById('oxChart').getContext('2d');
    const oxChart = new Chart(ctx, {
      type: 'bar',
      data: {
        labels: {{ labels|tojson }},
        datasets: [
          {
            label: '⭕ O',
            data: {{ o_counts|tojson }},
            backgroundColor: 'rgba(75, 192, 192, 0.7)'
          },
          {
            label: '❌ X',
            data: {{ x_counts|tojson }},
            backgroundColor: 'rgba(255, 99, 132, 0.7)'
          }
        ]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'top' },
          title: {
            display: true,
            text: '슬라이드별 O/X 응답 통계'
          }
        },
        scales: {
          y: {
            beginAtZero: true,
            ticks: { stepSize: 1 }
          }
        }
      }
    });
  </script>
</body>
</html>
